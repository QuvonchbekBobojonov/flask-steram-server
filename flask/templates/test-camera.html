<!DOCTYPE html>
<html>
<head>
<script src="https://unpkg.com/livekit-client/dist/livekit-client.umd.js"></script>
</head>
<body>
<video id="v" autoplay muted playsinline style="width:400px"></video>
<script>
const USER="quvonchbek-bobojonov"
fetch(`/token/${USER}`).then(r=>r.json()).then(async d=>{
  const r=new LiveKit.Room()
  await r.connect(d.url,d.token)
  const s=await navigator.mediaDevices.getUserMedia({video:true})
  document.getElementById("v").srcObject=s
  await r.localParticipant.publishTrack(s.getVideoTracks()[0])
})
</script>
</body>
</html>
